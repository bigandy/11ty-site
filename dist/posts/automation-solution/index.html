<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Automation (my) Solution - Andrew JD Hudson</title>
    <meta name="Description" content="I am writing about my experiences as a naval navel-gazer.">
    <link rel="alternate" href="/feed/feed.xml" type="application/atom+xml" title="Andrew&#39;s Blog">
    <link rel="preload" href="/assets/fonts/Inter-roman.var.woff2" as="font" type="font/woff2" crossorigin>
	  <link rel="stylesheet" href="/css/styles.css">
  </head>

  <body>
    <header>
	<div class="container">
		<h1 class="home"><a href="/">Andrew&#39;s Blog</a></h1>
		<ul class="nav"><li class="nav-item">
			<a href="/">Home</a>
		</li><li class="nav-item">
			<a href="/about/">About</a>
		</li><li class="nav-item">
			<a href="/posts/">Archive</a>
		</li><li class="nav-item">
			<a href="/cv/">CV</a>
		</li><li class="nav-item">
			<a href="/now/">Now</a>
		</li><li class="nav-item">
			<a href="/design/">Design</a>
		</li></ul>
		<theme-toggle></theme-toggle>

	</div>
</header>


    <main class="tmpl-post">
      <div class="container">
        <h1>Automation (my) Solution</h1>

<div class="tmpl-post__inner">
	
		<p>Posted on: <time class="postlist-date" datetime="2013-12-04">04-12-2013</time></p>
	

	<div class="tmpl-post__content">
		<p>#!/bin/bash</p>
<p>function newSite {<br>
local appdir=&quot;/Applications/XAMPP/htdocs/$1&quot;<br>
local sourcedir=&quot;/Applications/XAMPP/htdocs/source&quot;<br>
local author=&quot;Andrew JD Hudson&quot;<br>
local themedir=&quot;/Applications/XAMPP/htdocs/$1/content/themes/$1&quot;<br>
local starterTheme=&quot;es-theme&quot;<br>
local httpd_vhosts=&quot;/Applications/XAMPP/etc/extra/httpd-vhosts.conf&quot;<br>
local git=&quot;ssh://git@bitbucket.org/bigandy&quot;</p>
<p>if [ ! -d $appdir ]<br>
then<br>
mkdir -p $appdir/wp<br>
mkdir -p $appdir/content/themes/$1</p>
<pre><code>      # Copy Directories
      cp -rf $sourcedir/wp/ $appdir/wp
      cp -rf $sourcedir/$starterTheme/ $appdir/content/themes/$1

      # Copy files
      cp $sourcedir/{wp-config,index}.php $appdir
      cp $sourcedir/source.sublime-project $appdir/$1.sublime-project
      cp $sourcedir/source.sublime-workspace $appdir/$1.sublime-workspace

      # change folder url in sublime-project
      sed -i '' 's/source/'$1'/' $appdir/$1.sublime-project


      # Remove the git repos from the original source folders
      rm -rf $appdir/content/themes/$1/.git/
      rm -rf $appdir/wp/.git/

      # swap %%THEME\_NAME%% with $1 in sass file
      # $appdir/content/themes/$1/sass/style.sass
      sed -i '' 's/Starter Theme/'$1'/' $appdir/content/themes/$1/sass/style.sass

      sed -i '' 's/odo/'$1'/' $appdir/wp-config.php

      # Create the initial stylesheet
      cd $appdir/content/themes/$1 &amp;&amp; grunt sass

      if \[ ! $2 \]
        then
          $2 = $1
      fi

      # Git init, add, commit, set origin, push to origin
      cd $appdir/content/themes/$1 &amp;&amp; git init &amp;&amp; git add -A &amp;&amp; git commit -m &quot;initial commit of theme files&quot; &amp;&amp; git remote add origin $git/$2.git &amp;&amp; git push -u origin --all

      # Add folder and url to httpd-vhosts.conf
      echo '
</code></pre>
<p>ServerName '$1'.local<br>
DocumentRoot &quot;'$appdir'&quot; ' | sudo tee -a $httpd_vhosts &gt; /dev/null</p>
<pre><code>     # /etc/hosts set up
     sudo sed -ie 's/^127.0.0.1 localhost.\*$/&amp; '$1'.local/g' /etc/hosts

     # restart apache so the above changes to httpd-vhosts.conf will take effect
     sudo apachectl restart

     # Create DB
     # mysql -u root -e &quot;CREATE DATABASE IF NOT EXISTS $1\_db;&quot;; exit;
     #

     # subl $appdir/
     # Open Project in Sublime Text 3
     cd $appdir &amp;&amp; subl --project ${1}.sublime-project
      # TODO
      # 1. Plugins - how to compile a list of plugins in a folder, or import from a list? see bulk plugin installer plugin (http://wordpress.org/plugins/bulk-plugin-installation/)
      # 2. Import test DB with all installs from test.sql


    else
      echo &quot;Please choose a name that is not $1&quot;
  fi
</code></pre>
<p>}</p>
<p>newSite $1 $2</p>

	</div><p class="post-taglist-label">Tagged: </p>
		<ul class="post-taglist list--inline">
			
					<li>
						<a href="/tags/developing/" class="tag">developing</a>
					</li>
					<li>
						<a href="/tags/hide/" class="tag">hide</a>
					</li>
		</ul></div>

<p>
	<a href="/">← Home</a>
</p>

      </div>
    </main>

    <footer>
	<div class="container">
		<p>&copy; 2019 Andrew JD hudson</p>
	</div>
</footer>


    <script>
      // For syntax highlighting only
const html = String.raw;

class ThemeToggle extends HTMLElement {
	constructor() {
		super();

		this.STORAGE_KEY = 'user-color-scheme';
		this.COLOR_MODE_KEY = '--color-mode';
	}

	connectedCallback() {
		this.render();
	}

	getCSSCustomProp(propKey) {
		let response = getComputedStyle(
			document.documentElement
		).getPropertyValue(propKey);

		// Tidy up the string if there’s something to work with
		if (response.length) {
			response = response.replace(/\'|"/g, '').trim();
		}

		// Return the string response by default
		return response;
	}

	applySetting(passedSetting) {
		let currentSetting =
			passedSetting || localStorage.getItem(this.STORAGE_KEY);

		if (currentSetting) {
			document.documentElement.setAttribute(
				'data-user-color-scheme',
				currentSetting
			);
			this.setButtonLabelAndStatus(currentSetting);
		} else {
			this.setButtonLabelAndStatus(
				this.getCSSCustomProp(this.COLOR_MODE_KEY)
			);
		}
	}

	toggleSetting() {
		let currentSetting = localStorage.getItem(this.STORAGE_KEY);

		switch (currentSetting) {
			case null:
				currentSetting =
					this.getCSSCustomProp(this.COLOR_MODE_KEY) === 'dark'
						? 'light'
						: 'dark';
				break;
			case 'light':
				currentSetting = 'dark';
				break;
			case 'dark':
				currentSetting = 'light';
				break;
		}

		localStorage.setItem(this.STORAGE_KEY, currentSetting);

		return currentSetting;
	}

	setButtonLabelAndStatus(currentSetting) {
		this.modeToggleButton.innerText = `${
			currentSetting === 'dark' ? 'Light' : 'Dark'
		} theme`;
		this.modeStatusElement.innerText = `Color mode is now "${currentSetting}"`;
	}

	render() {
		this.innerHTML = html`
			<div class="[ theme-toggle ] [ md:ta-right gap-top-500 ]">
				<div
					role="status"
					class="[ visually-hidden ][ js-mode-status ]"
				></div>
				<button
					class="[ button ] [ font-base text-base weight-bold ] [ js-mode-toggle ]"
				>
					Dark theme
				</button>
			</div>
		`;

		this.afterRender();
	}

	afterRender() {
		this.modeToggleButton = document.querySelector('.js-mode-toggle');
		this.modeStatusElement = document.querySelector('.js-mode-status');

		this.modeToggleButton.addEventListener('click', evt => {
			evt.preventDefault();

			this.applySetting(this.toggleSetting());
		});

		this.applySetting();
	}
}

if ('customElements' in window) {
	customElements.define('theme-toggle', ThemeToggle);
}

    </script>
  </body>
</html>
